# 4.2 — Postgres Persistence and Audit JSON

## Status
Approved

## Story
**As a** system,
**I want** to persist structured results and audit trail to Postgres,
**so that** the system state is durable and queryable.

## Acceptance Criteria
1. `cheque` and `cheque_fields` tables persisted with relationships.
2. Audit JSON includes image references, confidences, and corrections.
3. Migrations created and applied.

## Dev Notes (Architecture References)
- Data Model [Source: architecture/data-model-core-tables.md]
- Export + Integration [Source: architecture/components.md#9-export-integration]
- Coding standards [Source: architecture/coding-standards.md]

### Testing
- Test file location: `backend/tests/services/test_persistence.py`
- Standards: follow `docs/architecture/coding-standards.md`; target ≥ 85% coverage on core logic
- Frameworks: `pytest`
- Story-specific: migration application and audit JSON contents per `testing-strategy.md`

## Tasks / Subtasks
- SQLAlchemy models and Alembic migrations.
- Services to persist pipeline outputs.
- Tests for persistence and audit JSON.

## Project Structure Notes
- Use transactions around multi-step writes.

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|

## Dev Agent Record
### Agent Model Used

### Debug Log References

### Completion Notes List

### File List

## QA Results


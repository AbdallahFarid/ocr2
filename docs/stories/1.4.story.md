# 1.4 — OCR Extraction (PaddleOCR + MICR)

## Status
Done

## Story
**As a** system,
**I want** to extract text using PaddleOCR and a specialized MICR model, with multi-crop voting,
**so that** I achieve high-confidence field values.

## Acceptance Criteria
1. PaddleOCR configured for Arabic + Latin + digits.
2. MICR engine scaffolded; full MICR line recognition (E-13B/CMC7) deferred for MVP.
3. Multi-crop voting implemented; confidences persisted per field.

## Dev Notes (Architecture References)
- OCR details [Source: architecture/components.md#4-ocr]
- Tech stack [Source: architecture/tech-stack.md]
- Coding standards [Source: architecture/coding-standards.md]
- Testing [Source: architecture/testing-strategy.md]

### Testing
- Test file location: `backend/tests/ocr/test_ocr_engine.py`
- Standards: follow `docs/architecture/coding-standards.md`; target ≥ 85% coverage on core logic
- Frameworks: `pytest`
- Story-specific: golden crops for Arabic/Latin/MICR; verify multi-crop voting behavior per `testing-strategy.md`

## Tasks / Subtasks
- [x] Implement OCR wrapper `backend/app/ocr/ocr_engine.py` with engines for standard text and MICR.
- [x] Add per-field language constraints (Arabic for name; English for date/amount/cheque_number) and ROI fallback selection in evaluator.
- [x] Implement initial multi-crop voting (n_votes) in ROI OCR calls.
- [x] Tests: `backend/tests/ocr/test_ocr_engine.py` with golden crops (unit-level with stubs/mocks).

## Project Structure Notes
- Store cropped images and outputs for audit trail.

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-09-15 | 0.2.0 | Per-field OCR constraints; cheque_number fallback and normalization; ROI expansions | dev-agent |
| 2025-09-15 | 0.2.1 | Added OCR engine unit tests; passing locally | dev-agent |
| 2025-09-15 | 0.2.2 | MICR full recognition deferred for MVP; scaffold only | dev-agent |

## Dev Agent Record
### Agent Model Used

### Debug Log References

### Completion Notes List

### File List

## QA Results

